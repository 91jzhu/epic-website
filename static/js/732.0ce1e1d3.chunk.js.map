{"version":3,"file":"static/js/732.0ce1e1d3.chunk.js","mappings":"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","sources":["components/Uploader.tsx","components/Tips.tsx","pages/Home.tsx"],"sourcesContent":["import {useStores} from \"../store\";\r\nimport {observer, useLocalObservable} from \"mobx-react\";\r\nimport {Alert, message, Spin, Upload} from \"antd\";\r\nimport {InboxOutlined} from '@ant-design/icons';\r\nimport styled from \"styled-components\";\r\n\r\nconst {Dragger} = Upload;\r\n\r\nconst Uploader = observer(() => {\r\n    const {ImageStore, UserStore} = useStores()\r\n    const store = useLocalObservable(() => ({\r\n        width: null,\r\n        height: null,\r\n        get widthStr() {\r\n            return store.width ? `/w/${store.width}` : ''\r\n        },\r\n        get heightStr() {\r\n            return store.height ? `/h/${store.height}` : \"\"\r\n        },\r\n        get fullStr() {\r\n            return (ImageStore.serverFile as any).attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\r\n        }\r\n    }))\r\n    const props = {\r\n        showUploadList: false,\r\n        beforeUpload(file: any) {\r\n            console.log(file)\r\n            if (UserStore.currentUser) {\r\n                if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\r\n                    message.error('只能上传 png/svg/jpg/jpeg/gif 类型的图片')\r\n                    return false;\r\n                }\r\n                if (file.size > 1024 * 1024) {\r\n                    message.error('图片不能超过 1M')\r\n                    return false;\r\n                }\r\n                ImageStore.setFile(file)\r\n                ImageStore.setFileName(file.name)\r\n                ImageStore.upload().then((serverFile: any) => {\r\n                    console.log('上传成功')\r\n                    console.log(serverFile);\r\n                }).catch(e => {\r\n                    console.warn(e)\r\n                })\r\n            } else {\r\n                message.warning('请先登录')\r\n            }\r\n            return false;\r\n        },\r\n    };\r\n    const handleWidth = (e: any) => {\r\n        store.width = e.target.value\r\n    }\r\n    const handleHeight = (e: any) => {\r\n        store.height = e.target.value\r\n    }\r\n    return (\r\n        <Wrapper>\r\n            <Spin spinning={ImageStore.isLoading} tip='上传中，请稍后...'>\r\n                <Dragger {...props}>\r\n                    <p className=\"ant-upload-drag-icon\">\r\n                        <InboxOutlined/>\r\n                    </p>\r\n                    <p className=\"ant-upload-text\">点击或拖拽上传图片</p>\r\n                    <p className=\"ant-upload-hint\">仅支持 png / jpg / jpeg / gif /svg 格式，且大小 1M 内</p>\r\n                </Dragger>\r\n            </Spin>\r\n            {ImageStore.serverFile ?\r\n                <Result>\r\n                    <H1>上传结果</H1>\r\n                    <DL>\r\n                        <dt><h2>线上地址</h2></dt>\r\n                        <dd>\r\n                            <a href={(ImageStore.serverFile as any).attributes.url.attributes.url}\r\n                               rel='noreferrer'\r\n                               target='_blank'>{(ImageStore.serverFile as any).attributes.url.attributes.url}</a>\r\n                        </dd>\r\n                        <dt><h2>文件名</h2></dt>\r\n                        <dd>{ImageStore.filename}</dd>\r\n                        <dt><h2>图片预览</h2></dt>\r\n                        <dd>\r\n                            <Image src={(ImageStore.serverFile as any).attributes.url.attributes.url}\r\n                                   alt={ImageStore.filename}/>\r\n                        </dd>\r\n                        <dt><h2>尺寸定制</h2></dt>\r\n                        <dd>\r\n                            <input placeholder='最大宽度(可选)' onChange={handleWidth}/>\r\n                            <input placeholder='最大高度(可选)' onChange={handleHeight}/>\r\n                        </dd>\r\n                        <dd>\r\n                            <a href={store.fullStr} target='_blank' rel='noreferrer'>{store.fullStr}</a>\r\n                        </dd>\r\n                    </DL>\r\n                </Result> : null}\r\n        </Wrapper>\r\n    )\r\n})\r\nconst Wrapper = styled.div`\r\n  padding: 24px;\r\n  width: 900px;\r\n  height: 100%;\r\n`\r\nconst Result = styled.div`\r\n  border: 1px dashed #ccc;\r\n  margin-top: 30px;\r\n  padding: 24px;\r\n  width: 852px;\r\n  height:400px;\r\n`\r\nconst DL = styled.dl`\r\n  height: 300px;\r\n  overflow: scroll;\r\n  ::-webkit-scrollbar { width: 0 !important }\r\n`\r\nconst H1 = styled.h1`\r\n  margin: 20px 0;\r\n  text-align: center;\r\n`\r\nconst Image = styled.img`\r\n  max-width: 300px;\r\n`\r\nexport default Uploader","import {useStores} from \"../store\";\r\nimport {observer} from \"mobx-react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Tips = observer(({children}: { children: any }) => {\r\n    console.log(children)\r\n    const {UserStore} = useStores()\r\n    return (\r\n        <Wrapper>\r\n            {UserStore.currentUser ? null : children}\r\n        </Wrapper>\r\n    )\r\n})\r\nconst Wrapper=styled.div`\r\n  height:100%;\r\n  width:100vw;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  color:grey;\r\n  font-size: 32px;\r\n`\r\nexport default Tips","import styled from \"styled-components\";\r\nimport {observer} from \"mobx-react\";\r\nimport {useStores} from \"../store\";\r\nimport Uploader from \"../components/Uploader\";\r\nimport Tips from \"../components/Tips\";\r\n\r\nconst Home = observer(() => {\r\n    const {UserStore: {currentUser}, AuthStore} = useStores()\r\n    return (\r\n        <Wrapper>\r\n            {currentUser ? <Uploader/> : <Tips>请注册或登录后再上传</Tips>}\r\n        </Wrapper>\r\n    )\r\n})\r\nconst Wrapper = styled.div`\r\n  flex:1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\nexport default Home"],"names":["Dragger","Upload","Uploader","observer","useStores","ImageStore","UserStore","store","useLocalObservable","width","height","widthStr","heightStr","fullStr","serverFile","attributes","url","props","showUploadList","beforeUpload","file","console","log","currentUser","test","type","message","size","setFile","setFileName","name","upload","then","catch","e","warn","Wrapper","spinning","isLoading","tip","className","InboxOutlined","Result","H1","DL","href","rel","target","filename","Image","src","alt","placeholder","onChange","value","styled","Tips","children","Home","AuthStore"],"sourceRoot":""}