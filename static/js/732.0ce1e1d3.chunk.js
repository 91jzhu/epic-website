"use strict";(self.webpackChunkepic=self.webpackChunkepic||[]).push([[732],{5732:function(e,n,r){r.r(n),r.d(n,{default:function(){return M}});var t,i,l,s,c,d,h,a=r(168),u=r(5751),o=r(9023),g=r(8858),x=r(1413),p=r(32),j=r(9553),f=r(4376),v=r(7083),Z=r(6776),w=r(184),m=j.Z.Dragger,b=(0,o.Pi)((function(){var e=(0,g.m)(),n=e.ImageStore,r=e.UserStore,t=(0,p.fv)((function(){return{width:null,height:null,get widthStr(){return t.width?"/w/".concat(t.width):""},get heightStr(){return t.height?"/h/".concat(t.height):""},get fullStr(){return n.serverFile.attributes.url.attributes.url+"?imageView2/0"+t.widthStr+t.heightStr}}})),i={showUploadList:!1,beforeUpload:function(e){if(console.log(e),r.currentUser){if(!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(e.type))return f.ZP.error("\u53ea\u80fd\u4e0a\u4f20 png/svg/jpg/jpeg/gif \u7c7b\u578b\u7684\u56fe\u7247"),!1;if(e.size>1048576)return f.ZP.error("\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc7 1M"),!1;n.setFile(e),n.setFileName(e.name),n.upload().then((function(e){console.log("\u4e0a\u4f20\u6210\u529f"),console.log(e)})).catch((function(e){console.warn(e)}))}else f.ZP.warning("\u8bf7\u5148\u767b\u5f55");return!1}};return(0,w.jsxs)(P,{children:[(0,w.jsx)(v.Z,{spinning:n.isLoading,tip:"\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u540e...",children:(0,w.jsxs)(m,(0,x.Z)((0,x.Z)({},i),{},{children:[(0,w.jsx)("p",{className:"ant-upload-drag-icon",children:(0,w.jsx)(Z.Z,{})}),(0,w.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u62d6\u62fd\u4e0a\u4f20\u56fe\u7247"}),(0,w.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301 png / jpg / jpeg / gif /svg \u683c\u5f0f\uff0c\u4e14\u5927\u5c0f 1M \u5185"})]}))}),n.serverFile?(0,w.jsxs)(S,{children:[(0,w.jsx)(k,{children:"\u4e0a\u4f20\u7ed3\u679c"}),(0,w.jsxs)(U,{children:[(0,w.jsx)("dt",{children:(0,w.jsx)("h2",{children:"\u7ebf\u4e0a\u5730\u5740"})}),(0,w.jsx)("dd",{children:(0,w.jsx)("a",{href:n.serverFile.attributes.url.attributes.url,rel:"noreferrer",target:"_blank",children:n.serverFile.attributes.url.attributes.url})}),(0,w.jsx)("dt",{children:(0,w.jsx)("h2",{children:"\u6587\u4ef6\u540d"})}),(0,w.jsx)("dd",{children:n.filename}),(0,w.jsx)("dt",{children:(0,w.jsx)("h2",{children:"\u56fe\u7247\u9884\u89c8"})}),(0,w.jsx)("dd",{children:(0,w.jsx)(F,{src:n.serverFile.attributes.url.attributes.url,alt:n.filename})}),(0,w.jsx)("dt",{children:(0,w.jsx)("h2",{children:"\u5c3a\u5bf8\u5b9a\u5236"})}),(0,w.jsxs)("dd",{children:[(0,w.jsx)("input",{placeholder:"\u6700\u5927\u5bbd\u5ea6(\u53ef\u9009)",onChange:function(e){t.width=e.target.value}}),(0,w.jsx)("input",{placeholder:"\u6700\u5927\u9ad8\u5ea6(\u53ef\u9009)",onChange:function(e){t.height=e.target.value}})]}),(0,w.jsx)("dd",{children:(0,w.jsx)("a",{href:t.fullStr,target:"_blank",rel:"noreferrer",children:t.fullStr})})]})]}):null]})})),P=u.ZP.div(t||(t=(0,a.Z)(["\n  padding: 24px;\n  width: 900px;\n  height: 100%;\n"]))),S=u.ZP.div(i||(i=(0,a.Z)(["\n  border: 1px dashed #ccc;\n  margin-top: 30px;\n  padding: 24px;\n  width: 852px;\n  height:400px;\n"]))),U=u.ZP.dl(l||(l=(0,a.Z)(["\n  height: 300px;\n  overflow: scroll;\n  ::-webkit-scrollbar { width: 0 !important }\n"]))),k=u.ZP.h1(s||(s=(0,a.Z)(["\n  margin: 20px 0;\n  text-align: center;\n"]))),F=u.ZP.img(c||(c=(0,a.Z)(["\n  max-width: 300px;\n"]))),y=b,$=(0,o.Pi)((function(e){var n=e.children;console.log(n);var r=(0,g.m)().UserStore;return(0,w.jsx)(C,{children:r.currentUser?null:n})})),C=u.ZP.div(d||(d=(0,a.Z)(["\n  height:100%;\n  width:100vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color:grey;\n  font-size: 32px;\n"]))),N=$,z=(0,o.Pi)((function(){var e=(0,g.m)(),n=e.UserStore.currentUser;e.AuthStore;return(0,w.jsx)(L,{children:n?(0,w.jsx)(y,{}):(0,w.jsx)(N,{children:"\u8bf7\u6ce8\u518c\u6216\u767b\u5f55\u540e\u518d\u4e0a\u4f20"})})})),L=u.ZP.div(h||(h=(0,a.Z)(["\n  flex:1;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),M=z}}]);
//# sourceMappingURL=732.0ce1e1d3.chunk.js.map